---
date: 2026-03-09
week: 3주차
phase: 관리자+강사·회원 웹 MVP
tags: [lifespeech, planner, dev]
---

# 2026-03-09 (월) — 3주차 D1

> **근무:** 10:00 ~ 19:00 · 실 작업 **8시간** (점심 1h 제외)
> **목표:** Next.js 셋업 + 인증 + 레이아웃 + 대시보드 카드

---

## 시간 블록

| 시간 | 작업 | 예상 | 완료 기준 |
|------|------|------|-----------|
| 10:00–11:30 | 프로젝트 초기화 | 1.5h | `npm run dev` → localhost:3001 |
| 11:30–12:00 | `lib/api.ts` 설정 | 0.5h | axios + 401 인터셉터 작동 |
| 12:00–13:00 | 🍽️ 점심 | | |
| 13:00–14:00 | `AuthContext` + `useAuth` | 1h | login/logout/user 상태 |
| 14:00–15:00 | `/login` 페이지 | 1h | 로그인 → `/dashboard` 이동 |
| 15:00–16:30 | 공통 레이아웃 | 1.5h | 사이드바 7메뉴 + 헤더 + 로그아웃 |
| 16:30–17:00 | 라우트 가드 | 0.5h | 미인증 → `/login` 리디렉트 |
| 17:00–18:30 | 대시보드 카드 4개 | 1.5h | API 연동 → 오늘 예약·방문·진행·신규 |
| 18:30–19:00 | 전체 테스트 + 정리 | 0.5h | 로그인부터 대시보드까지 에러 없음 ✅ |

---

## 상세 체크리스트

### 프로젝트 초기화 (10:00)
- [ ] `next create` → App Router + TypeScript + Tailwind 선택
- [ ] 폴더 구조: `app/`, `components/`, `lib/`, `hooks/`, `types/`
- [ ] `.env.local` → `NEXT_PUBLIC_API_URL=https://lifespeech-api.railway.app`
- [ ] ESLint + Prettier 설정

### API 인스턴스 (11:30)
- [ ] `lib/api.ts` — axios 인스턴스 (baseURL, 헤더 자동 첨부)
- [ ] 요청 인터셉터 — `Authorization: Bearer {accessToken}`
- [ ] 응답 인터셉터 — 401 → refreshToken 재발급 → 재요청 → 실패 시 로그아웃

### 인증 (13:00)
- [ ] `AuthContext` — `user`, `login()`, `logout()`, `isLoading`
- [ ] `useAuth` hook
- [ ] 토큰 localStorage 저장 (`access_token`, `refresh_token`)

### 로그인 페이지 (14:00)
- [ ] 이메일 + 비밀번호 폼 (유효성: 이메일 형식, 8자 이상)
- [ ] `POST /auth/login` 연동
- [ ] 성공 → `/dashboard`, 실패 → 에러 메시지

### 공통 레이아웃 (15:00)
- [ ] `components/Layout.tsx` — 사이드바 + 헤더 + `<Outlet />`
- [ ] 사이드바: 대시보드·예약·회원·수강·출석·SMS·스케줄 (7개 아이콘+텍스트)
- [ ] 헤더: 사용자명 + 로그아웃 버튼
- [ ] 활성 메뉴 하이라이트

### 라우트 가드 (16:30)
- [ ] `components/ProtectedRoute.tsx` — `!user` → `<Navigate to="/login" />`
- [ ] 토큰 만료 감지 → 자동 로그아웃

### 대시보드 카드 (17:00)
- [ ] `GET /dashboard/stats` 연동
- [ ] 카드 4개: 오늘 예약 N · 방문 대기 N · 진행 중 N · 신규 등록 N
- [ ] 로딩 스켈레톤 + 에러 상태

---

## 🤖 Claude 개발 요청 순서

### 요청 1 — Next.js 프로젝트 초기화 + API 인스턴스
```
lifespeech-admin Next.js 관리자 웹 프로젝트를 초기화해줘.

조건:
- Next.js 14 App Router + TypeScript + Tailwind CSS
- 폴더 구조: app/, components/, lib/, hooks/, types/
- .env.local: NEXT_PUBLIC_API_URL=https://lifespeech-api.railway.app
- lib/api.ts: axios 인스턴스 (baseURL, Authorization 헤더 자동 첨부)
- 응답 인터셉터: 401 → refreshToken 재발급 → 재요청, 실패 시 로그아웃

결과물: package.json, tsconfig.json, lib/api.ts, .env.local.example
```

### 요청 2 — AuthContext + 로그인 페이지
```
인증 Context와 로그인 페이지를 만들어줘.

1. contexts/AuthContext.tsx
   - 상태: user, isLoading
   - 함수: login(email, password), logout()
   - localStorage에 access_token, refresh_token 저장
   - 앱 시작 시 GET /auth/me로 사용자 정보 복원

2. app/login/page.tsx
   - 이메일 + 비밀번호 폼 (react-hook-form + zod 유효성)
   - POST /auth/login 호출
   - 성공: /dashboard로 이동, 실패: 에러 메시지 표시

3. components/ProtectedRoute.tsx
   - user 없으면 /login으로 리디렉트
```

### 요청 3 — 공통 레이아웃 + 대시보드 카드
```
관리자 공통 레이아웃과 대시보드를 만들어줘.

1. components/Layout.tsx
   - 사이드바: 대시보드·예약·CSV·회원·수강·출석·SMS (7개 메뉴, 아이콘+텍스트)
   - 헤더: 사용자명 + 로그아웃 버튼
   - 활성 메뉴 하이라이트 (usePathname으로 감지)

2. app/dashboard/page.tsx
   - GET /dashboard/stats 연동
   - 카드 4개: 오늘 예약 · 방문 대기 · 진행 중 · 신규 등록
   - 로딩 스켈레톤 (shimmer 효과)

Tailwind CSS + shadcn/ui 사용.
```

---

## ✅ 오늘 내가 직접 확인할 것

**로컬 개발 서버**
- [ ] `npm run dev` → 브라우저 `http://localhost:3001` 접속 → Next.js 화면 표시 확인
- [ ] `http://localhost:3001/login` → 로그인 폼 표시 확인

**로그인 플로우**
- [ ] 관리자 이메일 + 비밀번호 입력 → 로그인 클릭 → `/dashboard` 이동 확인
- [ ] 잘못된 비밀번호 → 에러 메시지 표시 확인
- [ ] URL에 `/dashboard` 직접 입력 (로그아웃 상태) → `/login`으로 리디렉트 확인

**레이아웃 + 대시보드**
- [ ] 사이드바 7개 메뉴 모두 표시 확인
- [ ] 각 메뉴 클릭 → 해당 페이지 이동 확인 (아직 빈 페이지여도 OK)
- [ ] 대시보드 카드 4개 표시 + 숫자 API에서 가져옴 확인

**❌ 막혔을 때**
- CORS 오류 → Railway 백엔드에 CORS 설정 추가 (Claude에게 요청)
- 로그인 후 흰 화면 → F12 Console 에러 캡처 → Claude에게 전달
- API 연결 안 됨 → `.env.local` NEXT_PUBLIC_API_URL 값 확인

---

## 작업 로그

| 시간 | 작업 내용 | 비고 |
|------|-----------|------|
| 10:00 | | |
| 10:30 | | |
| 11:00 | | |
| 11:30 | | |
| 13:00 | | |
| 13:30 | | |
| 14:00 | | |
| 14:30 | | |
| 15:00 | | |
| 15:30 | | |
| 16:00 | | |
| 16:30 | | |
| 17:00 | | |
| 17:30 | | |
| 18:00 | | |
| 18:30 | | |

---

## 메모 / 이슈

-
