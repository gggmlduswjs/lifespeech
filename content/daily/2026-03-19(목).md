---
date: 2026-03-19
week: 4주차
phase: AI 기능 + 이터레이션
tags: [lifespeech, planner, dev, AI]
---

# 2026-03-19 (목) — 4주차 D4

> **근무:** 10:00 ~ 19:00 · 실 작업 **8시간**
> **오전:** 피드백 반영
> **오후:** AI 면접 연습 + 숙제 AI 자동 피드백

---

## 시간 블록

| 시간 | 작업 | 예상 | 완료 기준 |
|------|------|------|-----------|
| 10:00–10:30 | 피드백 반영 + 재배포 | 0.5h | |
| 10:30–11:30 | 백엔드: 면접 API 구현 | 1h | Claude 면접 피드백 JSON 반환 |
| 11:30–12:00 | 면접 질문 DB 시드 | 0.5h | 질문 20개 DB 저장 |
| 12:00–13:00 | 🍽️ 점심 | | |
| 13:00–15:00 | 프론트: 면접 연습 페이지 | 2h | 질문→답변→피드백 사이클 ✅ |
| 15:00–16:30 | 숙제 AI 자동 피드백 연동 | 1.5h | 업로드 → 백그라운드 AI 피드백 |
| 16:30–17:30 | 강사 화면: 숙제 AI 피드백 표시 | 1h | 강사가 AI 피드백 미리보기 가능 |
| 17:30–18:30 | 전체 AI 기능 통합 테스트 | 1h | 3개 AI 기능 모두 작동 ✅ |
| 18:30–19:00 | Railway + Vercel 배포 | 0.5h | |

---

## 상세 체크리스트

### 피드백 반영 (10:00)
- [ ] P0/P1 수정 → 재배포

### 백엔드: 면접 연습 API (10:30)
- [ ] `POST /ai/interview`
  ```ts
  // 입력: { question: string, answer: string, category: string }
  const response = await anthropic.messages.create({
    model: 'claude-sonnet-4-6',
    system: `당신은 경험 많은 면접관입니다.
  스피치 학원 수강생의 면접 답변을 평가해주세요.
  평가 기준: 논리성, 자신감 표현, 핵심 전달력
  반드시 JSON으로만 응답하세요.`,
    messages: [{
      role: 'user',
      content: `질문: ${question}\n답변: ${answer}\n\nJSON: {"score": 1~10, "feedback": "200자 이내", "good_points": [""], "improve_points": [""]}`
    }]
  })
  ```
- [ ] 응답: `{ score, feedback, good_points, improve_points }`

### 면접 질문 DB 시드 (11:30)
- [ ] `interview_questions` 테이블: `id, category, question, difficulty`
- [ ] 카테고리별 질문 시드:
  - 자기소개 (5개): "1분 자기소개", "지원동기" ...
  - 강점/약점 (5개)
  - 경험 (5개): "어려운 상황 극복 경험"
  - 스피치 관련 (5개): "발표 경험", "긴장 극복법"

### 프론트: 면접 연습 페이지 (13:00)
- [ ] `/member/interview` 페이지
  - 카테고리 선택 (4개 버튼)
  - 질문 카드 (랜덤 1개 표시)
  - 텍스트 답변 입력 (or 음성 → STT 연동)
  - "AI 평가받기" 버튼 → `POST /ai/interview`
  - 결과: 점수(원형 게이지) + 피드백 + 잘한 점 + 개선점
  - "다음 질문" 버튼

### 숙제 AI 자동 피드백 (15:00)
- [ ] 기존 `POST /homework/upload` 수정
  - 파일 Storage 저장 후 → 백그라운드 AI 분석 시작
  - 음성 파일 → Whisper STT → Claude 피드백
  - `homework_submissions.ai_feedback` (text) 컬럼에 저장
- [ ] 프론트: 숙제 목록에 AI 피드백 표시
  - 피드백 없음 → "AI 분석 중..." 뱃지
  - 피드백 있음 → 접기/펼치기로 표시

### 강사 화면: AI 피드백 미리보기 (16:30)
- [ ] 강사 대시보드에 "숙제 제출 현황" 섹션 추가
- [ ] 회원별 최신 숙제 + AI 피드백 요약 표시
- [ ] 완료 기준: 강사가 강사 피드백 작성 전 AI 피드백 확인 가능

---

## 🤖 Claude 개발 요청 순서

### 요청 1 — 면접 연습 백엔드 + 질문 시드
```
면접 연습 API를 만들어줘.

1. POST /ai/interview (backend/src/routes/ai.ts)
   - body: { question: string, answer: string, category: string }
   - anthropic.messages.create() 호출:
     system: "당신은 경험 많은 면접관입니다. 스피치 학원 수강생의 면접 답변을 평가해주세요.
     평가 기준: 논리성, 자신감 표현, 핵심 전달력. 반드시 JSON으로만 응답하세요."
     user: "질문: {question}\n답변: {answer}\n\nJSON: {score: 1~10, feedback: '200자 이내', good_points: [''], improve_points: ['']}"
   - 응답: { score, feedback, good_points, improve_points }

2. interview_questions 테이블 DDL:
   id, category('자기소개'|'강점약점'|'경험'|'스피치'), question, difficulty

3. 시드 SQL (20개 질문, 카테고리별 5개):
   자기소개: "1분 자기소개를 해주세요", "지원 동기를 말해주세요" ...
   강점/약점, 경험, 스피치 관련 각 5개
```

### 요청 2 — 면접 연습 프론트 페이지
```
면접 연습 페이지를 만들어줘. app/member/interview/page.tsx

UI 흐름:
1. 카테고리 선택 버튼 4개 (자기소개 / 강점약점 / 경험 / 스피치)
2. GET /interview-questions?category={} → 랜덤 1개 질문 카드 표시
3. 텍스트 답변 입력 textarea (또는 음성 → STT 연동 선택)
4. "AI 평가받기" 버튼 → POST /ai/interview 호출
5. 로딩 → 결과 표시:
   - 점수: 원형 게이지 (1~10)
   - 피드백 텍스트
   - 잘한 점 (초록 체크)
   - 개선점 (주황 화살표)
6. "다음 질문" 버튼 → 같은 카테고리 다른 질문

shadcn/ui Progress, Card 사용.
```

### 요청 3 — 숙제 AI 자동 피드백
```
숙제 업로드 시 AI 피드백을 자동 생성하도록 수정해줘.

백엔드 (POST /homework/upload 수정):
1. 파일 Storage 저장 완료 후 → 백그라운드 AI 분석 시작 (await 없이 비동기)
2. 음성 파일이면: Whisper STT → Claude 피드백 생성
3. homework_submissions 테이블에 ai_feedback(text) 컬럼 추가
4. 분석 완료 후 ai_feedback 업데이트

프론트 (app/member/homework/page.tsx 수정):
- ai_feedback 없음: "AI 분석 중... 🔄" 뱃지 표시
- ai_feedback 있음: 접기/펼치기 아코디언으로 표시

강사 화면에도 AI 피드백 미리보기 추가:
- app/instructor/homework/page.tsx: 회원별 최신 숙제 + AI 피드백 요약
```

---

## ✅ 오늘 내가 직접 확인할 것 (M7 면접 Q&A 사이클)

**면접 연습 테스트**
- [ ] `/member/interview` 접속 → 카테고리 4개 버튼 표시 확인
- [ ] "자기소개" 클릭 → 질문 1개 카드 표시 확인
- [ ] 실제로 답변 입력 (3-5문장) → "AI 평가받기" 클릭
- [ ] 로딩 후 점수(원형 게이지) + 피드백 + 잘한 점 + 개선점 표시 확인
- [ ] **피드백 내용이 구체적이고 유용한지 직접 읽어보기**
- [ ] "다음 질문" → 다른 질문으로 바뀌는지 확인

**숙제 AI 피드백 테스트**
- [ ] 회원 계정 → `/member/homework` → 음성 파일 업로드
- [ ] 업로드 직후 "AI 분석 중... 🔄" 뱃지 표시 확인
- [ ] 30초~1분 후 새로고침 → "AI 분석 중" 뱃지가 실제 피드백 텍스트로 바뀜 확인
- [ ] 강사 화면 → 해당 회원 숙제 → AI 피드백 미리보기 확인

**❌ 막혔을 때**
- 면접 질문 없음 → Supabase → interview_questions 테이블 → 시드 SQL 실행됐는지 확인
- AI 피드백 이상함 → 어떻게 이상한지 메모 → Claude에게 프롬프트 개선 요청

---

## 작업 로그

| 시간 | 작업 내용 | 비고 |
|------|-----------|------|
| 10:00 | | |
| 10:30 | | |
| 11:00 | | |
| 11:30 | | |
| 13:00 | | |
| 13:30 | | |
| 14:00 | | |
| 14:30 | | |
| 15:00 | | |
| 15:30 | | |
| 16:00 | | |
| 16:30 | | |
| 17:00 | | |
| 17:30 | | |
| 18:00 | | |
| 18:30 | | |

---

## 메모 / 이슈

-
