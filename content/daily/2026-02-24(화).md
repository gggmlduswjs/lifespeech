---
date: 2026-02-24
week: 1ì£¼ì°¨
phase: í™˜ê²½ êµ¬ì¶•
tags: [lifespeech, planner, dev]
---

# 2026-02-24 (í™”) â€” 1ì£¼ì°¨ D2

> **ê·¼ë¬´:** 13:00 ~ 21:00 Â· ğŸ¤ ìŠ¤í”¼ì¹˜ ìˆ˜ì—… 19:30~21:00 Â· ì‹¤ ì‘ì—… **6ì‹œê°„**
> **ëª©í‘œ:** Supabase DB í…Œì´ë¸” 9ê°œ + ì¸ë±ìŠ¤ + RLS ì™„ì„±

---

## ì‹œê°„ ë¸”ë¡

| ì‹œê°„ | ì‘ì—… | ì˜ˆìƒ | ì™„ë£Œ ê¸°ì¤€ |
|------|------|------|-----------|
| 13:00â€“14:30 | 9ê°œ í…Œì´ë¸” SQL ìƒì„± (Claude ìš”ì²­) | 1.5h | Table Editor 9ê°œ í™•ì¸ |
| 14:30â€“15:30 | reservations CSVìš© ì»¬ëŸ¼ 8ê°œ ì¶”ê°€ | 1h | ì»¬ëŸ¼ í‘œì‹œ í™•ì¸ |
| 15:30â€“16:30 | ì¸ë±ìŠ¤ 8ê°œ ìƒì„± | 1h | EXPLAIN ANALYZE â†’ ì¸ë±ìŠ¤ ìŠ¤ìº” |
| 16:30â€“17:30 | RLS ì •ì±… ì„¤ì • | 1h | anon key ì§ì ‘ ì ‘ê·¼ â†’ ë¹ˆ ë°°ì—´ |
| 17:30â€“18:30 | ë§ˆì´ê·¸ë ˆì´ì…˜ SQL íŒŒì¼ GitHub ì»¤ë°‹ | 1h | 4ê°œ íŒŒì¼ push ì™„ë£Œ |
| 18:30â€“19:00 | í…ŒìŠ¤íŠ¸ ê³„ì • 3ê°œ ìƒì„± (ê´€ë¦¬ì/ê°•ì‚¬/íšŒì›) | 0.5h | Auth â†’ Users 3ê°œ í™•ì¸ |
| 19:00â€“19:30 | ìŠ¤í”¼ì¹˜ ìˆ˜ì—… ì¤€ë¹„ | | |
| 19:30â€“21:00 | ğŸ¤ ìŠ¤í”¼ì¹˜ ìˆ˜ì—… | | |

---

## ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

### 9ê°œ í…Œì´ë¸” ìƒì„± (Claude ìš”ì²­ â†’ Supabase SQL Editor ì‹¤í–‰)
- [ ] users, members, classes, reservations, enrollments, attendances, files, evaluations, counselings
  - ì™„ë£Œ ê¸°ì¤€: Table Editorì—ì„œ 9ê°œ í…Œì´ë¸” ëª©ë¡ í™•ì¸
- [ ] **reservations CSVìš© ì»¬ëŸ¼ 8ê°œ ì¶”ê°€**
  - naver_booking_id, product_name, party_size, paid_amount
  - confirmed_at, completed_at, cancelled_at, cancel_reason
- [ ] **ì¸ë±ìŠ¤ 8ê°œ ìƒì„±**
  - members(phone), reservations(status), reservations(reserved_date)
  - attendances(enrollment_id), attendances(session_number) ë“±
  - ì™„ë£Œ ê¸°ì¤€: EXPLAIN ANALYZE â†’ Index Scan í™•ì¸
- [ ] **RLS ì •ì±…** (anon key ì§ì ‘ ì ‘ê·¼ ì°¨ë‹¨)
  - ì™„ë£Œ ê¸°ì¤€: anon keyë¡œ ì§ì ‘ SELECT â†’ ë¹ˆ ë°°ì—´ or 401
- [ ] **ë§ˆì´ê·¸ë ˆì´ì…˜ SQL íŒŒì¼** GitHubì— ì»¤ë°‹
  - `supabase/migrations/001_create_tables.sql`
  - `supabase/migrations/002_create_indexes.sql`
  - `supabase/migrations/003_create_rls.sql`
  - `supabase/migrations/004_reservation_csv_cols.sql`
- [ ] **í…ŒìŠ¤íŠ¸ ê³„ì • 3ê°œ** (Authentication â†’ Usersì—ì„œ ì§ì ‘ ìƒì„±)
  - ê´€ë¦¬ì: admin@lifespeech.kr / password123
  - ê°•ì‚¬: instructor@lifespeech.kr / password123
  - íšŒì›: member@lifespeech.kr / password123

---

## ğŸ¤– Claude ê°œë°œ ìš”ì²­ ìˆœì„œ

### ìš”ì²­ 1 â€” 9ê°œ í…Œì´ë¸” ìƒì„± SQL
```
LifeSpeech ì•±ì˜ DB í…Œì´ë¸” 9ê°œë¥¼ ìƒì„±í•˜ëŠ” SQLì„ ì‘ì„±í•´ì¤˜.
Supabase SQL Editorì—ì„œ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ.

í…Œì´ë¸”:
1. users (id uuid, email, role: admin/instructor/member, name, phone, created_at)
2. members (id, user_id FK, name, phone, email, status: active/inactive, memo, created_at)
3. classes (id, name, type: group/1to1/director, instructor_id FK, max_capacity, sessions, created_at)
4. reservations (id, member_id FK, class_id FK, status: pending/confirmed/cancelled/completed, reserved_date, naver_booking_id, created_at)
5. enrollments (id, member_id FK, class_id FK, total_sessions, completed_sessions, status: active/completed, started_at)
6. attendances (id, enrollment_id FK, session_number, status: scheduled/attended/excused/adjusted/absent/note, attended_at, makeup_used bool)
7. files (id, member_id FK, enrollment_id FK, session_number, file_url, file_name, file_type, created_at)
8. evaluations (id, member_id FK, instructor_id FK, scores jsonb, notes text, created_at)
9. counselings (id, member_id FK, type: transfer/refund/general, content text, counseled_at)

ê° í…Œì´ë¸”ì— updated_at ì»¬ëŸ¼ í¬í•¨, updated_at ìë™ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±° ì¶”ê°€.
```

### ìš”ì²­ 2 â€” ì¸ë±ìŠ¤ + RLS ì •ì±… SQL
```
ìœ„ 9ê°œ í…Œì´ë¸”ì— ì¸ë±ìŠ¤ì™€ RLS ì •ì±…ì„ ì¶”ê°€í•˜ëŠ” SQLì„ ì‘ì„±í•´ì¤˜.

ì¸ë±ìŠ¤:
- members(phone) â€” ì „í™”ë²ˆí˜¸ ê²€ìƒ‰ìš©
- reservations(status), reservations(reserved_date) â€” í•„í„°ë§ìš©
- attendances(enrollment_id), attendances(session_number)
- files(member_id), counselings(member_id)

RLS ì •ì±…:
- ëª¨ë“  í…Œì´ë¸”ì— RLS í™œì„±í™” (ALTER TABLE ... ENABLE ROW LEVEL SECURITY)
- service_roleì€ ëª¨ë“  ì ‘ê·¼ í—ˆìš©
- anonì€ ì ‘ê·¼ ê¸ˆì§€ (ì •ì±… ì—†ìœ¼ë©´ ìë™ ì°¨ë‹¨)
```

### ìš”ì²­ 3 â€” reservations CSV ì»¬ëŸ¼ ì¶”ê°€ SQL
```
reservations í…Œì´ë¸”ì— ë„¤ì´ë²„ ì˜ˆì•½ CSV íŒŒì‹±ìš© ì»¬ëŸ¼ 8ê°œë¥¼ ì¶”ê°€í•˜ëŠ” SQLì„ ì‘ì„±í•´ì¤˜.

ALTER TABLE reservations ADD COLUMN:
- naver_booking_id text UNIQUE
- product_name text
- party_size integer DEFAULT 1
- paid_amount integer DEFAULT 0
- confirmed_at timestamptz
- completed_at timestamptz
- cancelled_at timestamptz
- cancel_reason text
```

---

## âœ… ì˜¤ëŠ˜ ë‚´ê°€ ì§ì ‘ í™•ì¸í•  ê²ƒ

**Supabase ëŒ€ì‹œë³´ë“œ (ë¸Œë¼ìš°ì €)**
- [ ] `supabase.com` â†’ í”„ë¡œì íŠ¸ â†’ **Table Editor** â†’ 9ê°œ í…Œì´ë¸” ëª©ë¡ í™•ì¸
  - users, members, classes, reservations, enrollments, attendances, files, evaluations, counselings
- [ ] reservations í…Œì´ë¸” í´ë¦­ â†’ naver_booking_id ì»¬ëŸ¼ ì¡´ì¬ í™•ì¸
- [ ] **Authentication â†’ Users** â†’ ê´€ë¦¬ì/ê°•ì‚¬/íšŒì› ê³„ì • 3ê°œ í™•ì¸

**SQL Editorì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸**
- [ ] SQL Editorì—ì„œ ì‹¤í–‰:
  ```sql
  EXPLAIN ANALYZE SELECT * FROM members WHERE phone = '010-1234-5678';
  ```
  â†’ ê²°ê³¼ì— "Index Scan" í¬í•¨ í™•ì¸

**RLS í…ŒìŠ¤íŠ¸**
- [ ] anon keyë¡œ Postmanì—ì„œ ì§ì ‘ GET ìš”ì²­ â†’ ë¹ˆ ë°°ì—´ or ì—ëŸ¬ ì‘ë‹µ í™•ì¸
  ```
  GET https://{í”„ë¡œì íŠ¸}.supabase.co/rest/v1/members
  Headers: apikey: {anon_key}
  ```

**âŒ ë§‰í˜”ì„ ë•Œ**
- SQL ì‹¤í–‰ ì˜¤ë¥˜ â†’ ì˜¤ë¥˜ ë©”ì‹œì§€ ì „ì²´ ë³µì‚¬ â†’ Claudeì—ê²Œ ì „ë‹¬
- RLS ì„¤ì • í›„ì—ë„ ë°ì´í„° ë³´ì„ â†’ ALTER TABLE ... ENABLE ROW LEVEL SECURITY ì‹¤í–‰ëëŠ”ì§€ í™•ì¸

---

## ì‘ì—… ë¡œê·¸

| ì‹œê°„ | ì‘ì—… ë‚´ìš© | ë¹„ê³  |
|------|-----------|------|
| 13:00 | | |
| 13:30 | | |
| 14:00 | | |
| 14:30 | | |
| 15:00 | | |
| 15:30 | | |
| 16:00 | | |
| 16:30 | | |
| 17:00 | | |
| 17:30 | | |
| 18:00 | | |
| 18:30 | | |
| 19:00 | ìŠ¤í”¼ì¹˜ ìˆ˜ì—… ì¤€ë¹„ | |
| 19:30 | ğŸ¤ ìŠ¤í”¼ì¹˜ ìˆ˜ì—… | |

---

## ë©”ëª¨ / ì´ìŠˆ

-

---

## ë‚´ì¼ ì¤€ë¹„

- Fastify ì„¤ì¹˜ íŒ¨í‚¤ì§€: `npm install fastify @supabase/supabase-js typescript ts-node nodemon`
- ë‚´ì¼(ìˆ˜) JWT ì¸ì¦ êµ¬í˜„ ì˜ˆì •
